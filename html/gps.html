<!DOCTYPE html>
<html>

    <head>
        
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin=""/>

        <!-- Make sure you put this AFTER Leaflet's CSS -->
        <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
            integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
            crossorigin="">
        </script>

    </head>




<body>
    <!-- el mapeeta -->
    <div id="mapid" style="width: 600px; height: 400px; position: relative;"></div>




    
    <script type="text/javascript">

        var mymap = L.map('mapid').setView([-32, -60], 13);
        // var marker = L.marker([latitud, longitud]).addTo(mymap);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
            '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.streets'
        }).addTo(mymap);
        

        
        let latitude
        let longitude
        let accuracy

        navigator.geolocation.getCurrentPosition(function(location) {
            latitude=location.coords.latitude;
            longitude=location.coords.longitude;
            accuracy=location.coords.accuracy;
        });

        axios.post('/calculador', {
            latitude: latitude,
            longitude: longitude,
            accuracy: accuracy,
        })
        .then(function (response) {
            for (let index = 0; index < response.data.length; index++) {
                var marker = L.marker([response.data[index].latitud, response.data[index].longitud]).addTo(mymap);
            }

        })
        
        .catch(function (error) {
            console.log(error);
        });



    </script>
</body>


</html>